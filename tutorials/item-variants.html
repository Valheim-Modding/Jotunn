<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Item Variants </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Item Variants ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
  
  
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="item-variants">Item Variants</h1>

<p>An <em>item variant</em> in Valheim is an item which can be crafted with varying textures on the same item/model. Although the game <em>theoretically</em> supports variants for all equippable items, they virtually limited that feature to shields and capes at the moment. But fear not, Jötunn enables you to add variants to all equippable items. Adding of custom item variants is achieved through JVLs <a class="xref" href="../api/Jotunn.Configs.ItemConfig.html">ItemConfig</a>.</p>
<h2 id="warning">Warning</h2>
<p>Valheim's style variants are implemented using a custom shader. That means enabling this feature for custom made items <strong>will replace whatever shader a renderer on that prefab used before</strong>. Valheim uses its own <code>Custom/Creature</code> shader for this feature, which seems to be the Unity standard shader with some added functionality. So if you stick with the standard shader, all your configuration will be retained. For information on the shader's properties see <a href="../data/prefabs/shader-list.html">our shader dump list</a>.</p>
<h2 id="adding-custom-variants">Adding custom variants</h2>
<p>In this example, we will clone a vanilla shield and a sword which the user can equip and add custom variants. In order to do this, we will need to reference already instantiated game assets. One method of doing so is by using an event provided by Jötunn. The event is fired when the vanilla items are in memory and thus clonable (more precisely in the start scene before the initial ObjectDB is cloned).</p>
<pre><code class="lang-cs">private void Awake()
{
    PrefabManager.OnVanillaPrefabsAvailable += AddVariants;
}
</code></pre>
<p>Inside the method we load different sprites for the variant icons and a sprite atlas texture using Jötunn's <a class="xref" href="../api/Jotunn.Utils.AssetUtils.html">AssetUtils</a>. Using the <a class="xref" href="../api/Jotunn.Configs.ItemConfig.html">ItemConfig's</a> properties <code>Icons</code> and <code>StyleTex</code>, we tell Jötunn that an item has variants (variant count always equals the icon array size) and to use the texture provided as the texture atlas for the two variants.</p>
<pre><code class="lang-cs">// Clone the wooden shield and the bronze sword and add own variations to it
private void AddVariants()
{
    Sprite var1 = AssetUtils.LoadSpriteFromFile(&quot;JotunnModExample/Assets/test_var1.png&quot;);
    Sprite var2 = AssetUtils.LoadSpriteFromFile(&quot;JotunnModExample/Assets/test_var2.png&quot;);
    Sprite var3 = AssetUtils.LoadSpriteFromFile(&quot;JotunnModExample/Assets/test_var3.png&quot;);
    Sprite var4 = AssetUtils.LoadSpriteFromFile(&quot;JotunnModExample/Assets/test_var4.png&quot;);
    Texture2D styleTex = AssetUtils.LoadTexture(&quot;JotunnModExample/Assets/test_varpaint.png&quot;);

    ItemConfig shieldConfig = new ItemConfig();
    shieldConfig.Name = &quot;$lulz_shield&quot;;
    shieldConfig.Description = &quot;$lulz_shield_desc&quot;;
    shieldConfig.AddRequirement(new RequirementConfig(&quot;Wood&quot;, 1));
    shieldConfig.Icons = new Sprite[] { var1, var2, var3, var4 };
    shieldConfig.StyleTex = styleTex;
    ItemManager.Instance.AddItem(new CustomItem(&quot;item_lulzshield&quot;, &quot;ShieldWood&quot;, shieldConfig));

    ItemConfig swordConfig = new ItemConfig();
    swordConfig.Name = &quot;$lulz_sword&quot;;
    swordConfig.Description = &quot;$lulz_sword_desc&quot;;
    swordConfig.AddRequirement(new RequirementConfig(&quot;Stone&quot;, 1));
    swordConfig.Icons = new Sprite[] { var1, var2, var3, var4 };
    swordConfig.StyleTex = styleTex;
    ItemManager.Instance.AddItem(new CustomItem(&quot;item_lulzsword&quot;, &quot;SwordBronze&quot;, swordConfig));

    // You want that to run only once, Jotunn has the item cached for the game session
    PrefabManager.OnVanillaPrefabsAvailable -= AddVariants;
}
</code></pre>
<p>As a result we can build a new shield with our custom variants, indicated by the &quot;Style&quot; button on the crafting menu.
<br>
<img src="../Documentation/images/data/variationRecipe.png" alt="Variation Recipe"></p>
<p>After clicking the style button, we can choose between our two variants.
<br>
<img src="../Documentation/images/data/variationSelection.png" alt="Variation Selection"></p>
<p>Each variation gets its own texture applied to the material.
<br>
<img src="../Documentation/images/data/variationResult.png" alt="Variation Result"></p>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Valheim-Modding/Jotunn/blob/prod/JotunnLib/Documentation/tutorials/item-variants.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../styles/toggle-theme.js"></script>
      </footer>    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
