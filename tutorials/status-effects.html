<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Custom Status Effects </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Custom Status Effects ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
  
  
  
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="custom-status-effects">Custom Status Effects</h1>

<p><em>Status Effects</em> in Valheim are used in quite a lot of places. You can have attack status effects like <em>Burning</em> or <em>Frozen</em>. You have the guardian powers which are temporary status effects affecting the players stats. You also have status effects attached to items like the Megingjord Belt which adds more available carrying weight to the player. Adding of custom status effects is done through the <a class="xref" href="../api/Jotunn.Managers.ItemManager.html">ItemManager</a> singleton class and JVLs abstraction <a class="xref" href="../api/Jotunn.Entities.CustomStatusEffect.html">CustomStatusEffect</a>.</p>
<p>All status effects will always be loaded <strong>after</strong> all items. However, status effects will be loaded in the order that you call the <code>AddStatusEffect</code> function.</p>
<h2 id="example">Example</h2>
<p>Because status effects have a broad use range we will concentrate on a simple example to display the basic concept of adding custom status effects via Jötunn. For that we will instantiate a simple status effect in code and use Unity ScriptableObject to instantiate the Valheim base class &quot;StatusEffect&quot;. That base class does not do very much except for displaying messages and displaying an icon for an active status effect. A &quot;real&quot; status effect is normally a subclass of StatusEffects which has methods for further coding of the effects (look at the vanilla SE_Stats or SE_Burning classes for example).</p>
<pre><code class="lang-cs">// Add new status effects
private void AddStatusEffects()
{
    StatusEffect effect = ScriptableObject.CreateInstance&lt;StatusEffect&gt;();
    effect.name = &quot;EvilStatusEffect&quot;;
    effect.m_name = &quot;$evilsword_effectname&quot;;
    effect.m_icon = AssetUtils.LoadSpriteFromFile(&quot;JotunnModExample/Assets/reee.png&quot;);
    effect.m_startMessageType = MessageHud.MessageType.Center;
    effect.m_startMessage = &quot;$evilsword_effectstart&quot;;
    effect.m_stopMessageType = MessageHud.MessageType.Center;
    effect.m_stopMessage = &quot;$evilsword_effectstop&quot;;

    EvilSwordEffect = new CustomStatusEffect(effect, fixReference: false);  // We dont need to fix refs here, because no mocks were used
    ItemManager.Instance.AddStatusEffect(EvilSwordEffect);
}
</code></pre>
<p>In our <a href="https://github.com/Valheim-Modding/JotunnModExample">JotunnModExample</a> this effect is added as the equip effect to the &quot;EvilSword&quot; so it activates when equipping the sword from the inventory.</p>
<pre><code class="lang-cs">// Add our custom status effect to it
itemDrop.m_itemData.m_shared.m_equipStatusEffect = EvilSwordEffect.StatusEffect;
</code></pre>
<p>The result is an icon displaying that the status effect is active.</p>
<p><img src="../Documentation/images/data/EvilSwordStatusEffect.png" alt="custom status effect"></p>
<p>And also custom messages when the effect starts and ends.</p>
<p><img src="../Documentation/images/data/EvilSwordStatusStart.png" alt="custom status effect start"> <img src="../Documentation/images/data/EvilSwordStatusStop.png" alt="custom status effect"></p>
<p>Note that all texts are tokenized and translated ingame. The translations are also provided by Jötunn. Read the <a href="localization.html">tutorial on Localizations</a> for more information on that topic.</p>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Valheim-Modding/Jotunn/blob/prod/JotunnLib/Documentation/tutorials/status-effects.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>

              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
        
        <span>Generated by <strong>DocFX</strong></span>
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../styles/toggle-theme.js"></script>
      </footer>    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
